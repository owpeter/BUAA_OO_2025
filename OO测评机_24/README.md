## 前言

先存放写好的评测机，作业代码在课程结束后再更新

## hw1

### 不满足的数据限制

- 输入表达式的有效长度至多为 200 个字符。其中输入表达式的有效长度指的是输入表达式去除掉所有空白符后剩余的字符总数。
- 输入表达式的代价限制

### 使用方法及主要功能

1. 将打包好的jar文件放入`pipeline.py`同目录下，要检验是否打包好请使用 `java -jar 文件名.jar`
2. 可根据需要修改`pipeline.py` 和 `gendata.py` 中的参数：
   - pipeline.py: 最后一行main传入参数改为你自己的文件名，可设置测评次数，建议至少执行一次千次级别的评测
   - gendata.py: 各种参数在文件开头，默认支持空白字符和前导0
3. 直接运行pipeline.py，可看到`tqdm`形式的运行进度条，运行完提供性能分相关建议
4. 性能分相关主要依据计算 $x = L_{p} / L_{min}$，值越大预期性能得分越低（自行查阅指导书）；对表现最坏的10个样例输出到同目录的`output.json`中

### 致谢

从oolens公众号中知道了学长的博客，评测机主要的框架完全继承自[这篇学长博客](https://saltyfishyjk.github.io/2022/03/07/%E3%80%8CBUAA-OO-Unit-1-HW1%E3%80%8D%E9%9D%A2%E5%90%91%E6%B5%8B%E8%AF%95%E5%B0%8F%E7%99%BD%E7%9A%84%E7%AE%80%E6%98%93%E8%AF%84%E6%B5%8B%E6%9C%BA/)

## hw2

### 前言

这次由于做了重构导致评测机整体慢人一步，但好歹还是搓出来了。sympy确实慢，然而本评测机还是使用了其作变量代入和部分展开。
   - `DataGenerator.py` 最后一行替换文件名支持双人对拍。
   - `forMutualTest.py` 需要指定 `checker.jar` 作为文法检查器，需要一个**严格按照文法解析**的作业打包文件，然后会对同目录下所有其他文件进行正确性检查。

     所谓**严格按照文法解析**，举个例子，就是不能把 `exp(1+2*x^3)` 这种不符合文法的表达式解析为 `exp((1+2*x^3))` ，需要能解析为其它不对的形式，如 `exp(1)`

   - 如果查出结果不一样，会输出到同目录下的文件夹中。不排除评测机有问题，欢迎反馈。

### 不满足的数据限制

> `Cost(h) = Cost(h')*2`, h是自定义函数调用，其中 h' 是将调用 h 的参数作为表达式因子代入后，所得到的表达式。

这条实在是懒得搓了，别的cost限制、 长度限制应该都满足互测要求。作为代替，自定义函数调用的 `cost` 等于 实参代价相乘 * (2 ^ 实参个数)

### 致谢

`hw2` 部分评测机的交付离不开 `Nadleeh` 同学的贡献和push（？ 祝大家hack愉快。


## hw3
### 这个程序需要什么
首先这是一个对拍程序，而且需要一个`checker.jar`进行合法性检验
`checker.jar`:一个读入极其严格的hw3作业程序，一旦输入不符合文法就会立刻报Exception，如果没有可以联系周围同学问问，(`ltc`同学的hw3就是完美的checker)
（最不需要鲁棒性的一集）

### 这个程序可以做什么
- 这是一个多线程对拍程序，可以测正确性和合法性。
- 可以大规模生成数据，也可以手动添加`specialData`：添加到`DataGenerator.py`文件开头的`specialData`数组即可，还要给dataCost数组添加值（随便填即可）
- 可以在`forMutualTest.py`最后修改数据组数
- 会自动读取当前文件夹下所有`.jar`进行测试，方便一刀7爆
- 会控制数据复杂度，如果终端中出现`python depth over...`说明生成了一个很复杂的数据，被自动清除，不必惊慌。

### 使用方法
- 首先将你通过各种渠道获得的`checker.jar`和你要测试的程序放到`hw3`目录下，然后在`hw3`目录下运行forMutualTest即可。
- 强烈建议在`linux`下运行，速度可以提高10+倍，在linux下300s以内即可跑完1000条
- 程序会将生成的前50组数据放到`the_first_50_data.txt`文件，届时你可以观察生成数据的强度
- 如果测试程序中有人有错误，会立刻终止程序并将数据存放到一个新生成的文件中。

### 鸣谢
感谢 `Vcore` 同学打下的地基以及checker.jar

`hw3`施工：      `Nadleeh`


## hw5

将 `jar` 文件放在同目录下，按运行环境满足下列要求，即可运行 `mutualTest.py`。

- 本评测机使用多进程同时评测多个jar文件
- 如发现错误，则会在同目录下生成 `f"{ErrorType}_by_{jarName}_at_{cache/FolderName}.txt"`，内含输入
- `mutualTest.py` 可多开，但能开几个由机器条件决定，自己试试吧

### Windows

- 同目录下放 `checker.exe`，由 `main.c` 编译而来
- 同目录下放 `datainput_student_win64.exe`

### Linux

- 同目录下放 `checker`，由 `main.c` 编译而来
- 同目录下放 `datainput_student_linux_x86_64`

### 贡献情况

- 感谢 `zjh` 同学的正确性判断文件
- 施工： `Nadleeh` `Vcore`

## hw6

### 自测

将 `jar` 文件放在同目录下，切记到 `masProgress.py` 或 `forTLE.py` 开头中修改文件名

- Windows 环境：同目录下放 `datainput_student_win64.exe`
- Linux 环境：同目录下放 `datainput_student_linux_x86_64`

评测结果：保留出错的文件，出错内容同步出现在输出框和同目录下 `res.txt` 文件内

### 互测
多文件测试：测试同目录下所有jar，运行`multiFile.py`
性能比较：运行`art.py`,计算规则详见指导书

### debug
将`masProgress.py`中的`DEBUG`置为`True`即可忽略`#`开头的调试信息
`checker.py`的main中调参并运行可以单个手动检测

- 感谢 `zjh` 同学的正确性判断文件（hw5），从其改写了 `python` 版的正确性判断
- 施工： `Vcore` 
